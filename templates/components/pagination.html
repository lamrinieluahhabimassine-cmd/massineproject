<!-- Pagination Component - Include this in templates that need pagination -->
{% if pagination and pagination.pages > 1 %}
<nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center">
        <!-- Previous Page -->
        <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
            <a class="page-link" 
               href="{{ url_for(endpoint, page=pagination.prev_num, **url_params) if pagination.has_prev else '#' }}"
               {% if not pagination.has_prev %}tabindex="-1" aria-disabled="true"{% endif %}>
                <i class="bi bi-chevron-left"></i> Précédent
            </a>
        </li>

        <!-- First Page -->
        {% if pagination.page > 3 %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for(endpoint, page=1, **url_params) }}">1</a>
        </li>
        {% if pagination.page > 4 %}
        <li class="page-item disabled">
            <span class="page-link">...</span>
        </li>
        {% endif %}
        {% endif %}

        <!-- Page Numbers -->
        {% for page_num in range(
            [1, pagination.page - 2]|max,
            [pagination.pages + 1, pagination.page + 3]|min
        ) %}
            <li class="page-item {% if page_num == pagination.page %}active{% endif %}">
                <a class="page-link" href="{{ url_for(endpoint, page=page_num, **url_params) }}">
                    {{ page_num }}
                    {% if page_num == pagination.page %}
                    <span class="visually-hidden">(current)</span>
                    {% endif %}
                </a>
            </li>
        {% endfor %}

        <!-- Last Page -->
        {% if pagination.page < pagination.pages - 2 %}
        {% if pagination.page < pagination.pages - 3 %}
        <li class="page-item disabled">
            <span class="page-link">...</span>
        </li>
        {% endif %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for(endpoint, page=pagination.pages, **url_params) }}">
                {{ pagination.pages }}
            </a>
        </li>
        {% endif %}

        <!-- Next Page -->
        <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
            <a class="page-link" 
               href="{{ url_for(endpoint, page=pagination.next_num, **url_params) if pagination.has_next else '#' }}"
               {% if not pagination.has_next %}tabindex="-1" aria-disabled="true"{% endif %}>
                Suivant <i class="bi bi-chevron-right"></i>
            </a>
        </li>
    </ul>

    <!-- Pagination Info -->
    <div class="text-center text-muted mt-2">
        <small>
            Affichage de {{ pagination.per_page * (pagination.page - 1) + 1 }} 
            à {{ [pagination.per_page * pagination.page, pagination.total]|min }} 
            sur {{ pagination.total }} résultats
        </small>
    </div>
</nav>
{% endif %}